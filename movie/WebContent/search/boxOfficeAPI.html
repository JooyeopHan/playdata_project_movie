<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>영화 검색</title>
</head>
<body>
	<h1>영화진흥위원회 일별 박스오피스 API 요청</h1>
	<button onclick=callAPI()>일일 박스 오피스 요청</button>
	<button onclick = saveMovie()>요청 명단 저장</button>
	<p></p>
	
<script src="https://code.jquery.com/jquery-3.6.3.js" 
integrity="sha256-nQLuAZGRRcILA+6dMBOvcRh5Pe310sBpanc6+QBmyVM=" 
crossorigin="anonymous"></script>	

<script>
const today = Date()

console.log(today)

function callAPI(){$.ajax({
	  method: "GET",
	  url: "http://www.kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json",
	  data :{key : "8ef8d0855390695f37c6d9af6fd08725", targetDt : "20230103"}
	})
	  .done(function( msg ) {
	    for(var i=0; i < msg.boxOfficeResult.dailyBoxOfficeList.length ; i++){
	    	$(" p ").append("<name id = "+i+">"+msg.boxOfficeResult.dailyBoxOfficeList[i].movieNm+"</name><br>")
	    } 
	    
	  });}
function saveMovie(){
	var dom1 = document.getElementsByTagName("name")  
	var boxOfficeDaily = []

	for (var j =0; j<dom1.length; j++){
		boxOfficeDaily.push(dom1[j].textContent)
		console.log(dom1[j].textContent)
	}
	if(boxOfficeDaily.length != 0){
		console.log(boxOfficeDaily)
	}
	else {
		window.alert("해당하는 영화가 존재하지 않습니다.")
	}
}

</script>
<script>
/*
var dom = document.querySelectorAll("name")
var boxOfficeDaily = []
console.log(dom)

for (var j =0; j<dom.length; j++){
	boxOfficeDaily.push(dom[j].textContent)
	console.log(dom[j].textContent)
}

console.log(boxOfficeDaily)
*/


</script>



</body>
</html>